(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9528],{3388:function(e,t,r){"use strict";r.r(t);var n=r(5893),s=r(6265),c=r(809),a=r.n(c),o=r(2447),i=(r(1664),r(6428)),l=r(5621),u=r(4937),p=(r(4730),r(7294)),d=r(463),f=r(9669),g=r.n(f),h=r(733),m=r.n(h),v=r(9352);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e=(0,p.useState)([]),t=e[0],r=e[1],s=(0,p.useState)(""),c=s[0],f=s[1],h=(0,p.useState)(""),x=h[0],j=h[1],y=(0,p.useState)([]),O=y[0],w=y[1],N=(0,p.useState)(!1),k=N[0],P=N[1],E=(0,p.useState)(""),_=E[0],C=E[1],S=(0,d.uI)({accept:"image/*",onDrop:function(e){r(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),D=S.getRootProps,I=S.getInputProps,U=t.map((function(e){return(0,n.jsx)("div",{className:"drop-gallery-thumb",children:(0,n.jsx)("img",{src:e.preview})},e.name)}));(0,p.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token");j(e.category),C(t),f(e._id),console.log("we are running client side"),""!=x&&z(e._id)}),[x]),(0,p.useEffect)((function(){return function(){t.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[t]);var z=function(){var e=(0,o.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(x),e.next=4,g().get("".concat("http://3.109.200.71","/api/business/get-profile/").concat(x,"/").concat(t));case 4:r=e.sent,n=r.data,w(n.business.images),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,o.Z)(a().mark((function e(n){var s,o,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(t.length>0)){e.next=29;break}s=0;case 3:if(!(s<t.length)){e.next=24;break}return P(!0),(o=new FormData).append("file",t[s]),console.log(t),e.prev=8,console.log(x),e.next=12,g().post("".concat("http://3.109.200.71","/api/business/update-profile-cover-picture/").concat(c,"/").concat(x,"/allphotos"),o);case 12:i=e.sent,l=i.data,console.log(l),w(l.businessImages),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0);case 21:s++,e.next=3;break;case 24:r([]),P(!1),u.Am.success("Photos Uploaded Successfully",{theme:"light",position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=30;break;case 29:u.Am.error("Please Upload a Image...!",{theme:"light",position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 30:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,o.Z)(a().mark((function e(t,r){var n,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={rmImage:r},e.prev=2,e.next=5,g().put("".concat("http://3.109.200.71","/api/business/delete-image/").concat(x,"/").concat(_),n);case 5:s=e.sent,c=s.data,console.log(c),c.success&&(u.Am.success(c.msg,{theme:"light",position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),w(c.businessImages)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("div",{className:"main-content d-flex flex-column",children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)(u.Ix,{}),(0,n.jsxs)("div",{className:"add-listings-box",children:[(0,n.jsxs)("div",b(b({},D()),{},{className:"dropzone",children:[(0,n.jsx)("h3",{children:"Clinic Gallery"}),t.length>0?(0,n.jsxs)("div",{className:"gallery-flex",children:[U,(0,n.jsx)("input",b({},I()))]}):(0,n.jsxs)("div",{className:"file-upload-box",children:[(0,n.jsx)("input",b({},I())),(0,n.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})]})),(0,n.jsx)("br",{}),(0,n.jsx)("form",{onClick:Z,children:(0,n.jsx)("div",{className:"add-listings-btn",style:{float:"right"},children:(0,n.jsx)("button",{type:"submit",children:"Upload"})})}),(0,n.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:k&&(0,n.jsx)("div",{className:"loader",children:(0,n.jsx)(m(),{type:"spokes",color:"#febc1e"})})})]}),(0,n.jsx)("div",{className:"gallery add-listings-btn",children:O.map((function(e){var t="".concat("http://3.109.200.71","/api/business/get-photos/").concat(e);return(0,n.jsxs)("div",{className:"delete-icon-head",children:[(0,n.jsx)("img",{src:t,alt:"missing",className:"gallery__img"}),(0,n.jsx)("div",{children:(0,n.jsx)("form",{onSubmit:function(t){return L(t,e)},children:(0,n.jsx)("button",{className:"image-trash",type:"submit",children:(0,n.jsx)(v.GnT,{color:"white",size:"20"})})})})]})}))}),(0,n.jsx)("div",{className:"flex-grow-1"}),(0,n.jsx)("div",{className:"copyrights-area",children:(0,n.jsx)("div",{className:"row align-items-center",children:(0,n.jsx)("div",{className:"col-lg-6 col-sm-6 col-md-6",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("i",{className:"bx bx-copyright"}),"2022",(0,n.jsx)("a",{href:"#",children:"BEYONDLOVE"}),". All rights reserved"]})})})})]})]})}},5437:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/add-listing/petclinic",function(){return r(3388)}])},4405:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var n=r(7294),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=n.createContext&&n.createContext(s),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};function i(e){return e&&e.map((function(e,t){return n.createElement(e.tag,a({key:t},e.attr),i(e.child))}))}function l(e){return function(t){return n.createElement(u,a({attr:a({},e.attr)},t),i(e.child))}}function u(e){var t=function(t){var r,s=e.attr,c=e.size,i=e.title,l=o(e,["attr","size","title"]),u=c||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,l,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==c?n.createElement(c.Consumer,null,(function(e){return t(e)})):t(s)}}},function(e){e.O(0,[9774,5937,7321,2036,8811,733,4335,2888,179],(function(){return t=5437,e(e.s=t);var t}));var t=e.O();_N_E=t}]);